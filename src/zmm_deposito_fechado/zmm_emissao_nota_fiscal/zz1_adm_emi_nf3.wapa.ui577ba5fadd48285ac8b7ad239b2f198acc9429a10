sap.ui.define([],                                                                                                                                                                                                                                              
    function () {                                                                                                                                                                                                                                              
        "use strict";                                                                                                                                                                                                                                          
        return {                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            onChangeCheckBoxUpdate: function (oEvent) {                                                                                                                                                                                                        
                if (this.getView().getModel().hasPendingChanges()) {                                                                                                                                                                                           
                    this.getView().getModel().submitChanges()                                                                                                                                                                                                  
                }                                                                                                                                                                                                                                              
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            onChangeAvailableCheckBoxAction: function (oEvent) {                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                var that = this;                                                                                                                                                                                                                               
                var oBindingContext = oEvent.getSource().getBindingContext();                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
                //if (oEvent.getSource().getModel().hasPendingChanges()) {                                                                                                                                                                                     
                //    oEvent.getSource().getModel().submitChanges()                                                                                                                                                                                            
                // }                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                /* ===================================================================&nbsp;                                                                                                                                                                   
                Chama Action no Behavior da CDS&nbsp;                                                                                                                                                                                                          
                =================================================================== */                                                                                                                                                                         
                var fnFunction = function () {                                                                                                                                                                                                                 
                    return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
                        that.extensionAPI.invokeActions(                                                                                                                                                                                                       
                            "/fragmentCheckBox",                                                                                                                                                                                                               
                            oBindingContext,                                                                                                                                                                                                                   
                            {                                                                                                                                                                                                                                  
                                "UseAvailableCheckBox": oBindingContext.getObject().UseAvailableCheckBox ? true : false                                                                                                                                        
                            },                                                                                                                                                                                                                                 
                        ).then(function (data) {                                                                                                                                                                                                               
                            fnResolve();                                                                                                                                                                                                                       
                            that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                       
                        });                                                                                                                                                                                                                                    
                    });                                                                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
                var mParameters = {                                                                                                                                                                                                                            
                    dataloss: false                                                                                                                                                                                                                            
                };                                                                                                                                                                                                                                             
                this.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            onChangeUsedStockAction: function (oEvent) {                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
                var that = this;                                                                                                                                                                                                                               
                var oInput = oEvent.getSource();                                                                                                                                                                                                               
                var oBindingContext = oEvent.getSource().getBindingContext();                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
                var vNewUsedStock = parseFloat( oInput.getValue() );                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                /* ===================================================================&nbsp;                                                                                                                                                                   
                Chama Action no Behavior da CDS&nbsp;                                                                                                                                                                                                          
                =================================================================== */                                                                                                                                                                         
                var fnFunction = function () {                                                                                                                                                                                                                 
                    return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
                        that.extensionAPI.invokeActions(                                                                                                                                                                                                       
                            "/fragmentUsedStock",                                                                                                                                                                                                              
                            oBindingContext,                                                                                                                                                                                                                   
                            {                                                                                                                                                                                                                                  
                                "NewUsedStock": vNewUsedStock                                                                                                                                                                                                  
                            },                                                                                                                                                                                                                                 
                        ).then(function (data) {                                                                                                                                                                                                               
                            fnResolve();                                                                                                                                                                                                                       
                            that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                       
                        });                                                                                                                                                                                                                                    
                    });                                                                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
                var mParameters = {                                                                                                                                                                                                                            
                    dataloss: false                                                                                                                                                                                                                            
                };                                                                                                                                                                                                                                             
                this.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            onActionNavigateR07: function (oEvent) {                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                /* ===================================================================&nbsp;                                                                                                                                                                   
                Recupa referência à tabela do relatório                                                                                                                                                                                                        
                =================================================================== */                                                                                                                                                                         
                let oItems = this.templateBaseExtension.getExtensionAPI().getSelectedContexts();                                                                                                                                                               
                                                                                                                                                                                                                                                               
                /* ===================================================================&nbsp;                                                                                                                                                                   
                Navegação para nenhuma linha selecionada                                                                                                                                                                                                       
                =================================================================== */                                                                                                                                                                         
                if (!oItems.length) {                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
                    /* ===================================================================&nbsp;                                                                                                                                                               
                    Verifica se usuário tem permissão para navegação&nbsp;                                                                                                                                                                                     
                    =================================================================== */                                                                                                                                                                     
                    sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported([                                                                                                                                                      
                        { target: { shellHash: "visaoremessaretorno-display" } }                                                                                                                                                                               
                    ])                                                                                                                                                                                                                                         
                        .done(function (aResponse) {                                                                                                                                                                                                           
                            aResponse.map(function (elem, index) {                                                                                                                                                                                             
                                if (elem.supported === true) {                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
                                    /* ===================================================================&nbsp;                                                                                                                                               
                                    Chama outro aplicativo                                                                                                                                                                                                     
                                    =================================================================== */                                                                                                                                                     
                                    var href = (sap.ushell && sap.ushell.Container && sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({                                                                                          
                                        target: { semanticObject: "visaoremessaretorno", action: "display" },                                                                                                                                                  
                                        params: {}                                                                                                                                                                                                             
                                    })) || "";                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
                                    sap.m.URLHelper.redirect(href, false);                                                                                                                                                                                     
                                }                                                                                                                                                                                                                              
                                else {                                                                                                                                                                                                                         
                                    alert('Usuário sem permissão para acessar o link');                                                                                                                                                                        
                                }                                                                                                                                                                                                                              
                            })                                                                                                                                                                                                                                 
                        })                                                                                                                                                                                                                                     
                        .fail(function () {                                                                                                                                                                                                                    
                            alert('Falha ao acessar o link');                                                                                                                                                                                                  
                        });                                                                                                                                                                                                                                    
                }                                                                                                                                                                                                                                              
                /* ===================================================================&nbsp;                                                                                                                                                                   
                Navegação para uma linha selecionada                                                                                                                                                                                                           
                =================================================================== */                                                                                                                                                                         
                else if (oItems.length == 1) {                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
                    /* ===================================================================&nbsp;                                                                                                                                                               
                    Verifica se usuário tem permissão para navegação&nbsp;                                                                                                                                                                                     
                    =================================================================== */                                                                                                                                                                     
                    sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported([                                                                                                                                                      
                        { target: { shellHash: "visaoremessaretorno-display" } }                                                                                                                                                                               
                    ])                                                                                                                                                                                                                                         
                        .done(function (aResponse) {                                                                                                                                                                                                           
                            aResponse.map(function (elem, index) {                                                                                                                                                                                             
                                if (elem.supported === true) {                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
                                    /* ===================================================================&nbsp;                                                                                                                                               
                                    Chama outro aplicativo                                                                                                                                                                                                     
                                    =================================================================== */                                                                                                                                                     
                                    var href_parameters = (sap.ushell && sap.ushell.Container &&                                                                                                                                                               
                                        sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({                                                                                                                                        
                                            target: { semanticObject: "visaoremessaretorno", action: "display" },                                                                                                                                              
                                            params: {                                                                                                                                                                                                          
                                                OriginPlant: oItems[0].getObject().OriginPlant,                                                                                                                                                                
                                                DestinyPlant: oItems[0].getObject().DestinyPlant,                                                                                                                                                              
                                                Pedido: oItems[0].getObject().PurchaseOrder                                                                                                                                                                    
                                            }                                                                                                                                                                                                                  
                                        }));                                                                                                                                                                                                                   
                                    sap.m.URLHelper.redirect(href_parameters, false);                                                                                                                                                                          
                                                                                                                                                                                                                                                               
                                }                                                                                                                                                                                                                              
                                else {                                                                                                                                                                                                                         
                                    alert('Usuário sem permissão para acessar o link');                                                                                                                                                                        
                                }                                                                                                                                                                                                                              
                            })                                                                                                                                                                                                                                 
                        })                                                                                                                                                                                                                                     
                        .fail(function () {                                                                                                                                                                                                                    
                            alert('Falha ao acessar o link');                                                                                                                                                                                                  
                        });                                                                                                                                                                                                                                    
                }                                                                                                                                                                                                                                              
                else {                                                                                                                                                                                                                                         
                    alert('Favor selecionar apenas uma linha');                                                                                                                                                                                                
                }                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            onActionNavigateRascunho: function (oEvent) {                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                var ini = 0.                                                                                                                                                                                                                                   
                debugger;                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                if (ini = 0) {                                                                                                                                                                                                                                 
                    return;                                                                                                                                                                                                                                    
                }                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
                var that = this;                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                var oBindingContext = this.templateBaseExtension.getExtensionAPI().getSelectedContexts();                                                                                                                                                      
                                                                                                                                                                                                                                                               
                var fnFunction = function () {                                                                                                                                                                                                                 
                    return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
                        that.extensionAPI.invokeActions(                                                                                                                                                                                                       
                            "/qtdeTransferidaStatus",                                                                                                                                                                                                          
                            oBindingContext,                                                                                                                                                                                                                   
                            {                                                                                                                                                                                                                                  
                                "UseAvailableCheckBox": true                                                                                                                                                                                                   
                            },                                                                                                                                                                                                                                 
                        ).then(function (data) {                                                                                                                                                                                                               
                            debugger;                                                                                                                                                                                                                          
                            fnResolve();                                                                                                                                                                                                                       
                            //that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                            /* ===================================================================&nbsp;                                                                                                                                                       
                            Verifica se usuário tem permissão para navegação&nbsp;                                                                                                                                                                             
                            =================================================================== */                                                                                                                                                             
                            sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported([                                                                                                                                              
                                { target: { shellHash: "ZZ1_ADM_EMI_NF2-manage" } }                                                                                                                                                                            
                            ])                                                                                                                                                                                                                                 
                                .done(function (aResponse) {                                                                                                                                                                                                   
                                    aResponse.map(function (elem, index) {                                                                                                                                                                                     
                                        if (elem.supported === true) {                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
                                            /* ===================================================================&nbsp;                                                                                                                                       
                                            Chama outro aplicativo                                                                                                                                                                                             
                                            =================================================================== */                                                                                                                                             
                                            var href = (sap.ushell && sap.ushell.Container && sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({                                                                                  
                                                target: { semanticObject: "ZZ1_ADM_EMI_NF2", action: "manage" },                                                                                                                                               
                                                params: { Status: '99' }                                                                                                                                                                                       
                                            })) || "";                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
                                            sap.m.URLHelper.redirect(href, false);                                                                                                                                                                             
                                            that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                       
                                        }                                                                                                                                                                                                                      
                                        else {                                                                                                                                                                                                                 
                                            sap.m.MessageBox.error('Usuário sem permissão para continuar processo via outro Aplicativo');                                                                                                                      
                                        }                                                                                                                                                                                                                      
                                    })                                                                                                                                                                                                                         
                                })                                                                                                                                                                                                                             
                                .fail(function () {                                                                                                                                                                                                            
                                    sap.m.MessageBox.error('Usuário sem permissão para continuar processo via outro Aplicativo');                                                                                                                              
                                });                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                        });                                                                                                                                                                                                                                    
                    });                                                                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
                var mParameters = {                                                                                                                                                                                                                            
                    dataloss: false                                                                                                                                                                                                                            
                };                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
                this.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            }                                                                                                                                                                                                                                                  
        };                                                                                                                                                                                                                                                     
    });                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               