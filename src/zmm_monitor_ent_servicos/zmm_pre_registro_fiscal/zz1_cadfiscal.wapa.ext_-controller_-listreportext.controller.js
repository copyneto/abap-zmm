sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{newAttachment:function(e){debugger;var t=e.getSource().getParent();var a=this.extensionAPI.getSelectedContexts();var r=new sap.m.Dialog({contentWidth:"300px",resizable:true,type:sap.m.D+
ialogType.Message});r.setTitle("Carregar NF");var s="/sap/opu/odata/SAP/ZMM_PRE_REGISTRO_FISCAL_SRV/";var n=new sap.ui.model.odata.v2.ODataModel(s);if(a.length>0){var i=a.reduce(function(e,t){return t.getObject()},"")}var o=`${s}PdfURLSet(NrNf='${i.NrNf}+
',CnpjCpf='${i.CnpjCpf}')/FileUploadSet`;var p=new sap.ui.unified.FileUploader({width:"100%",fileType:"pdf",style:"Emphasized",uploadComplete:function(e){r.close();r.destroy();if(e.mParameters.status=="200"||e.mParameters.status=="201"){t.getModel().refr+
esh(true);sap.m.MessageToast.show("Carga realizada com sucesso.")}else{if(e.mParameters.response){alert("Return Code: "+e.mParameters.response)}}}.bind(this)});p.setName("Simple Uploader");p.setUploadUrl(String(o));p.setSendXHR(true);p.setUseMultipart(fa+
lse);p.setUploadOnChange(false);var l=new sap.ui.unified.FileUploaderParameter({name:"x-csrf-token",value:n.getSecurityToken()});p.insertHeaderParameter(l,0);var u=new sap.m.Button({text:"Upload",type:sap.m.ButtonType.Accept,press:function(){var e=p.getF+
ocusDomRef();if(p.getValue()===""){sap.m.MessageToast.show("Favor selecionar um arquivo");return}var t=new sap.ui.unified.FileUploaderParameter({name:"Content-Type",value:e.getAttribute("type")});p.insertHeaderParameter(t,0);p.insertHeaderParameter(new s+
ap.ui.unified.FileUploaderParameter({name:"SLUG",value:p.getValue()}),1);p.upload()}.bind(this)});var d=new sap.m.Button({text:"Cancelar",type:sap.m.ButtonType.Reject,press:function(){r.close();r.destroy();this.getView().removeAllDependents()}.bind(this)+
});r.addContent(p);r.setBeginButton(u);r.setEndButton(d);r.open()},showLogs:function(e){var t=this.extensionAPI.getSelectedContexts();var a=t[0].getObject();var r=a.Empresa+a.Filial+a.Lifnr+a.NrNf;sap.ushell.Container.getServiceAsync("CrossApplicationNav+
igation").then(function(e){var t=e.hrefForExternal({target:{semanticObject:"ApplicationLog",action:"showList"},params:{LogObjectId:"ZMM_MONITSERV_CADFIS",LogExternalId:r,DateFrom:a.DtLancto.toLocaleDateString().split("/").reverse().join("-")}});var s=win+
dow.location.href.split("#")[0]+t;sap.m.URLHelper.redirect(s,true)})}}});                                                                                                                                                                                      