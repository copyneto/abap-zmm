sap.ui.define(["sap/m/PDFViewer"],function(e){"use strict";return{DwldPdf:function(t){var n=this.extensionAPI.getSelectedContexts();if(!n.length){sap.m.MessageToast.show("Nenhum registro selecionado.");return}var s=new sap.m.Dialog({contentWidth:"300px",+
resizable:true,type:"Message"});s.setTitle("Download");if(n.length==1){var o=new sap.m.Text({text:"Deseja baixar os anexos do documento selecionado?"})}else{var o=new sap.m.Text({text:"Deseja baixar os anexos dos "+n.length+" documentos selecionados?"})}+
var a=new sap.m.Button({text:"Baixar",type:"Accept",press:function(){s.close();s.destroy();var t="/sap/opu/odata/SAP/ZMM_MONITOR_SERVICOS_SRV/";var o=new sap.ui.model.odata.ODataModel(t);for(let s=0;s<n.length;s++){var a=n[s].getObject();var i="GetLinesS+
et(NrNf='"+a.NrNf+"',CnpjCpf='"+a.CnpjCpf+"')";var r=function(){return new Promise(function(n,s){o.read(i,{success:function(s){if(!s.Lines){return}const o=s.Lines.split(";");for(let n=0;n<o.length;n++){var a=t+"AnexoSet(NrNf='"+s.NrNf+"',CnpjCpf='"+s.Cnp+
jCpf+"',Linha='"+o[n]+"')/$value";var i=new e;this.getView().addDependent(i);i.setSource(a);i.downloadPDF()}n()}.bind(this),error:function(e){s()}.bind(this)})}.bind(this))}.bind(this);this.extensionAPI.securedExecution(r,{busy:{set:true,check:false},sAc+
tionLabel:"Download"})}}.bind(this)});var i=new sap.m.Button({text:"Cancelar",type:"Reject",press:function(){s.close();s.destroy();this.getView().removeAllDependents()}.bind(this)});s.addContent(o);s.setBeginButton(i);s.setEndButton(a);s.open()},showLogs+
:function(e){var t=this.extensionAPI.getSelectedContexts();var n=t[0].getObject();var s=n.Empresa+n.Filial+n.Lifnr+n.NrNf;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){var t=e.hrefForExternal({target:{semanticObject:+
"ApplicationLog",action:"showList"},params:{LogObjectId:"ZMM_MONITSERV_LANCTO",LogExternalId:s,DateFrom:n.DtLancto.toLocaleDateString().split("/").reverse().join("-")}});var o=window.location.href.split("#")[0]+t;sap.m.URLHelper.redirect(o,true)})}}});   